!function(t){function n(a){if(o[a])return o[a].exports;var e=o[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var o={};n.m=t,n.c=o,n.i=function(t){return t},n.d=function(t,o,a){n.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:a})},n.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(o,"a",o),o},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([function(t,n){!function(t){function n(t,o,a){return void 0===a||0==+a?Math[t](o):(o=+o,a=+a,null===o||isNaN(o)||"number"!=typeof a||a%1!=0?NaN:o<0?-n(t,-o,a):(o=o.toString().split("e"),o=Math[t](+(o[0]+"e"+(o[1]?+o[1]-a:-a))),o=o.toString().split("e"),+(o[0]+"e"+(o[1]?+o[1]+a:a))))}function o(){infoWindow.close(),d.forEach(function(t){t[0].setMap(null)}),d=[]}function a(t,n){infoWindow.setContent(n),infoWindow.open(i,t),i.panTo(t.getPosition())}function e(t){var n=new google.maps.Marker({position:new google.maps.LatLng(t.latitude,t.longitude),map:i,title:t.company}),o='\n\t\t\t<div class="bfploc-infoWindow">\n\t\t\t\t<span class="bfploc-result--company">'+t.company+'</span>\n\t\t\t\t<span class="bfploc-result--distance">'+t.distance+' miles</span>\n\t\t\t\t<span class="bfploc-result--address">'+t.address+'</span>\n\t\t\t\t<span class="bfploc-result--city">'+t.city+'</span>\n\t\t\t\t<span class="bfploc-result--state">'+t.state+'</span>\n\t\t\t\t<span class="bfploc-result--postal_code">'+t.postal_code+"</span>\n\t\t\t</div>\n\t\t";google.maps.event.addListener(n,"click",function(){a(n,o)}),d.push([n,o])}function r(n){return t.ajax({url:f+"geocode",dataType:"json",contentType:"application/json",method:"POST",data:JSON.stringify({search_string:n})})}function s(n){t.ajax({url:f+"retail_locations_by_coords",dataType:"json",contentType:"application/json",method:"POST",data:JSON.stringify(n),success:function(r){var s=0;switch(i.setCenter({lat:n.lat,lng:n.long}),parseInt(t("#radius").val())){case 50:i.setZoom(8);break;case 25:i.setZoom(9);break;case 15:i.setZoom(10);break;default:i.setZoom(11)}o(),t(".bfploc-results").html("");var l=[];r.forEach(function(n){if(-1===t.inArray(n.LocationID,l)){l.push(n.LocationID);var o=n.distance;"Kilometers"===c&&(o=Math.round10(1.60934*o,-1));var a='\n\t\t\t\t\t\t<li class="bfploc-result" data-result-id="'+s+'">\n\t\t\t\t\t\t\t<span class="bfploc-result--company">'+n.company+'</span>\n\t\t\t\t\t\t\t<span class="bfploc-result--distance">'+o+" "+c+'</span>\n\t\t\t\t\t\t\t<span class="bfploc-result--address">'+n.address+'</span>\n\t\t\t\t\t\t\t<span class="bfploc-result--city">'+n.city+'</span>\n\t\t\t\t\t\t\t<span class="bfploc-result--state">'+n.state+'</span>\n\t\t\t\t\t\t\t<span class="bfploc-result--postal_code">'+n.postal_code+"</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t";t(".bfploc-results").append(a),e(n),s++}}),t(".bfploc-results .bfploc-result").click(function(){var n=t(this).data("result-id");a(d[n][0],d[n][1])})},error:function(t){alert("Error with search")}})}var i=void 0,l=void 0,c=bfploc.distance_system,p=infoWindow=null,d=[],u=!1,f="https://api.b-fonline.com/api/";!function(){t("#bfploc_form #minor_brand_id").length<1||t("#bfploc_form #minor_brand_id option").length>1||1==t("#bfploc_form #minor_brand_id option").length&&""!==t("#bfploc_form #minor_brand_id option").first().val()||t.ajax({url:f+"brand/"+t("#brand_id").val(),success:function(n){var o=bfploc.excluded_minor_brands.split(","),a=t("#bfploc_form #minor_brand_id").html();n.minorBrands.forEach(function(n){n.brand_minor_description&&t.inArray(n.brand_minor_id,o)<=-1&&(a+='<option value="'+n.brand_minor_id+'">'+n.brand_minor_description+"</option>")}),t("#bfploc_form #minor_brand_id").html(a)},error:function(t){alert("Error retrieving minor brands.")}})}(),bfploc.autocomplete&&function(){l=new google.maps.places.Autocomplete(t("#search_string")[0]),t("#search_string").on("change",function(){u=!0}),l.addListener("place_changed",function(){u=!1})}(),function(){t("#bfploc_form").on("submit",function(n){n.preventDefault();var o={radius:t("#radius").val(),brand_id:t("#brand_id").val(),type:t("#type").val(),site_id:t("#site_id").val()};t("#minor_brand_id").length>0&&""!==t("#minor_brand_id").val()&&(o.minor_brand_id=t("#minor_brand_id").val()),"Kilometers"===c&&(o.radius=Math.round10(1.60934*o.radius,-1)),bfploc.autocomplete&&l.getPlace()&&!u?(o.lat=l.getPlace().geometry.location.lat(),o.long=l.getPlace().geometry.location.lng(),s(o)):t.when(r(t("#search_string").val())).then(function(t){o.lat=t.lat,o.long=t.lng,s(o)})})}(),function(){var t=bfploc.map_center.split(",");t={lat:parseFloat(t[0].trim()),lng:parseFloat(t[1].trim())},i=new google.maps.Map(document.getElementById("bfploc_map"),{center:t,zoom:11}),p=new google.maps.Geocoder,infoWindow=new google.maps.InfoWindow}(),Math.round10||(Math.round10=function(t,o){return n("round",t,o)})}(jQuery)},function(t,n){},function(t,n,o){o(0),t.exports=o(1)}]);